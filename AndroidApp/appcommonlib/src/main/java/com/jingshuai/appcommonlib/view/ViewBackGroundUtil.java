package com.jingshuai.appcommonlib.view;

import android.graphics.Bitmap;
import android.graphics.drawable.BitmapDrawable;
import android.view.View;

/**
 * Created by eqruvvz on 1/3/2018.
 * ????background ?????? bitmap
 * ????????
 *
 */

public class ViewBackGroundUtil {
/**
 * ?view???????????????<br>
 * <font color=red>????????????????</font>
 *
 * @param v
 */
@SuppressWarnings("deprecation")
public static void setAndRecycleBackground(View v, int resID) {
    // ??ImageView???????
    Bitmap bitmap1 = null;
    if (v.getBackground() != null) {
        try {
            //?????bitmap????????
            bitmap1 = ((BitmapDrawable) v.getBackground()).getBitmap();
        } catch (ClassCastException e) {
            //?????bitmap?????????????GC??
            v.getBackground().setCallback(null);
        }
    }
    // ???????Matrix??????
    v.setBackgroundResource(resID);
    // bitmap1??????????????????????????
    if (bitmap1 != null && !bitmap1.isRecycled()) {
        bitmap1.recycle();
    }
}

/**
 * ?view???????????????<br>
 * <font color=red>????????????????</font>
 *
 * @param v
 */
@SuppressWarnings("deprecation")
public static void setAndRecycleBackground(View v, BitmapDrawable imageDrawable) {
    // ??ImageView???????
    Bitmap bitmap1 = null;
    if (v.getBackground() != null) {
        try {
            //?????bitmap????????
            bitmap1 = ((BitmapDrawable) v.getBackground()).getBitmap();
        } catch (ClassCastException e) {
            //?????bitmap?????????????GC??
            v.getBackground().setCallback(null);
        }
    }
    // ???????Matrix??????
    v.setBackgroundDrawable(imageDrawable);
    // bitmap1??????????????????????????
    if (bitmap1 != null && !bitmap1.isRecycled()) {
        bitmap1.recycle();
    }
}
}
